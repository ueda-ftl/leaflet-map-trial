<!DOCTYPE html>
<html lang="ja">

<head>
	<meta charset="utf-8">
	<title>MapLibre Pot Marking</title>
	<link rel="icon" type="image/svg+xml" href="img/favicon.svg">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- MapLibre GL JS
	cf. https://maplibre.org/maplibre-gl-js/docs/
	-->
	<link href="https://unpkg.com/maplibre-gl/dist/maplibre-gl.css" rel="stylesheet" />
	<script src="https://unpkg.com/maplibre-gl/dist/maplibre-gl.js"></script>

	<!-- turf
	cf. https://maplibre.org/maplibre-gl-js/docs/examples/draw-a-circle/
	-->
	<script src="https://cdn.jsdelivr.net/npm/@turf/turf/turf.min.js"></script>

	<!-- font awesome
	cf. https://fontawesome.com/search?q=location&ic=free
	-->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
		integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
</head>

<body>
	<!-- 地図表示エリア -->
	<div id="map"></div>

	<!-- 各種操作ボタン -->
	<div class="controls lt">
		<div class="secondary-group">
			<button id="redraw"><i class="fa-solid fa-rotate-right"></i></button>
			<select id="basemapSelect">
				<option value="osm" title="OpenStreetMap">osm</option>
				<option value="gsi_std" title="国土地理院 標準地図">gsi</option>
				<option value="gsi_photo" title="国土地理院 航空写真">gsip</option>
				<option value="google" title="Google Maps">gmap</option>
				<option value="osm_vec" title="OpenStreetMap Vector">osm_vec</option>
				<option value="gsi_vec" title="国土地理院 Vector">gsi_vec</option>
			</select>
		</div>
		<div class="secondary-group">
			<span>
				<input id="with3D" type="checkbox" class="toggle-checkbox" checked />
				<label for="with3D" class="toggle-label"></label>
				<i class="fa-solid fa-cubes" style="margin: 0 5px 0 -3px;"
					onclick="document.getElementById('with3D').click();"></i>
			</span>
			<input type="number" id="ratioHeight" min="0" max="1" step="0.1" value="0.2">
		</div>
		<button id="clearTrajBtn" class="secondary" title="軌跡削除"><i class="fa-solid fa-eraser"></i></button>
	</div>
	<div class="controls rt">
		<div class="tertiary-group">
			<span id="v_bearing" class="value"></span>
			<button id="rotateRight" title="時計回り"><i class="fa-solid fa-rotate-right"></i></button>
			<button id="rotateLeft" title="反時計回り"><i class="fa-solid fa-rotate-left"></i></button>
			<button id="rotateN" title="北"><i class="fa-solid fa-n"></i></button>
			<button id="rotateS" title="南"><i class="fa-solid fa-s"></i></button>
			<button id="rotateW" title="西"><i class="fa-solid fa-w"></i></button>
			<button id="rotateE" title="東"><i class="fa-solid fa-e"></i></button>
			<i class="fa-solid fa-rotate"></i>
		</div>
		<div class="tertiary-group">
			<span id="v_pitch" class="value"></span>
			<button id="addPitch" title="傾斜+"><i class="fa-solid fa-plus"></i></button>
			<button id="subPitch" title="傾斜-"><i class="fa-solid fa-minus"></i></button>
			<button id="zeroPitch" title="フラット"><i class="fa-solid fa-0"></i></button>
			<i class="fa-solid fa-slash"></i>
		</div>
		<span class="tertiary">
			<input id="lockMap" type="checkbox" class="toggle-checkbox" />
			<label for="lockMap" class="toggle-label"></label>
			<i class="fa-solid fa-lock" style="margin: 0 5px 0 -3px;"
				onclick="document.getElementById('lockMap').click();"></i>
		</span>
		<button id="resetView" class="secondary" title="既定の表示状態"><i class="fa-solid fa-street-view"></i></button>
		<table class="value">
			<tbody>
				<tr>
					<td>zoom</td>
					<td id="v_zoom"></td>
				</tr>
				<tr>
					<td>N traj.</td>
					<td id="n_traj">0</td>
				</tr>
				<tr>
					<td>N fav.</td>
					<td id="n_fav">0</td>
				</tr>
			</tbody>
		</table>
	</div>
	<div class="controls lb">
		<button id="saveUrlBtn" class="secondary" title="URL保存"><i class="fa-solid fa-bookmark"></i></button>
		<button id="shareUrlBtn" class="secondary" title="URL保存+共有"><i class="fa-solid fa-share-from-square"></i></button>
		<button id="downloadCsvBtn" class="secondary" title="CSV保存"><i class="fa-solid fa-file-csv"></i></button>
	</div>
	<div class="controls rb">
		<table>
			<tr class="secondary-group">
				<td id="moveFavNW"></td>
				<td id="moveFavN"><i class="fa-solid fa-arrow-up"></i></td>
				<td id="moveFavNE"></td>
			</tr>
			<tr class="secondary-group">
				<td id="moveFavW"><i class="fa-solid fa-arrow-left"></i></td>
				<td style="font-size: 12px; color: black;">1m</td>
				<td id="moveFavE"><i class="fa-solid fa-arrow-right"></i></td>
			</tr>
			<tr class="secondary-group">
				<td id="moveFavSW"></td>
				<td id="moveFavS"><i class="fa-solid fa-arrow-down"></i></td>
				<td id="moveFavSE" class="secondary"></td>
			</tr>
		</table>
		<div>
			<input type="number" id="fav_radius" min="5" max="300" step="1" value="40" class="secondary">
			<span>m</span>
		</div>
		<span class="secondary">
			<button id="delFavBtn" class="secondary" title="お気に入り削除"><i class="fa-solid fa-delete-left"></i></button>
			<input id="editableFav" type="checkbox" class="toggle-checkbox" />
			<label for="editableFav" class="toggle-label"></label>
			<i class="fa-solid fa-lock-open" style="margin: 0 5px 0 -3px;"
				onclick="document.getElementById('editableFav').click();"></i>
			<button id="addFavBtn" class="primary" title="お気に入り追加"><i class="fa-solid fa-thumbtack"></i></button>
		</span>
	</div>

	<!-- トースト表示エリア -->
	<div id="toast" class="hide"></div>

	<script>
		(version => {
			function addNewElement(tag, attrs, parent) {
				const elem = document.createElement(tag);
				Object.entries(attrs).forEach(([k, v]) => elem[k] = v);
				parent.appendChild(elem);
			}
			addNewElement("link", { rel: "stylesheet", href: `css/style.css?v=${version}` }, document.head);
			addNewElement("script", { src: `js/polyline_encoding.js?v=${version}` }, document.body);
			addNewElement("script", { src: `js/with_maplibregl.js?v=${version}` }, document.body);
		})("0.2.250919c");
	</script>

</body>

</html>